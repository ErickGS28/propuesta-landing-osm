"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4604],{74604:function(e,t,r){r.r(t),r.d(t,{Form:function(){return A}});var l=r(57437),o=r(50116),a=r(24033),i=r(2265),n=r(61865),s=r(87415),m=r(64750),d=r(15146),u=r(74492),c=r(59176),p=r(42767),f=r(14263),g=r(59029),x=r(67146),h=r(63134),v=r(53668),b=r(11588),y=r(2663),F=r(37155),j=r(43093),M=r(38399),S=r(89701),N=r(52426),E=r(53335),T=r(67135),C=r(4518),q=r(31044),O=r(18597);let P=e=>{let{messageErrors:t}=e;return O.Z.object().shape({currentGoal:O.Z.string().trim().required(t.requiredField).nullable(),companyERP:O.Z.string().trim().required(t.requiredField).nullable()})},w=e=>{let{locale:t,product:r}=e,l=q.i[t];switch(r){case"smart":return P({messageErrors:l}).shape({solutionUsed:O.Z.string().trim().required(l.requiredField).nullable()});case"tracos":return P({messageErrors:l}).shape({levelOfMaintenance:O.Z.string().trim().required(l.requiredField).nullable()});case"energy":return P({messageErrors:l}).shape({energyManagementChallenge:O.Z.string().trim().required(l.requiredField).nullable()});default:return P({messageErrors:l})}},R=e=>{var t,r,d,u,c,p;let{copy:g,setFormStage:x}=e,h=(0,a.usePathname)(),b=(0,o.useLocale)(),{dispatch:y}=(0,v.I)(),{userData:F,removeUserData:M,setUserData:q}=(0,f.useConversionFormContext)(),[O,P]=(0,i.useState)(!1),R=(0,n.cI)({resolver:(0,S.X)(w({locale:b,product:F.product}))}),{register:_,handleSubmit:Z,formState:{errors:L}}=R,U=async e=>{P(!0);let t={email:F.email,page:F.page,origin:F.page,jobCategory:(0,C.p)(F.jobTitle),product:F.product,currentGoal:e.currentGoal,levelOfAutomation:e.levelOfAutomation,levelOfMaintenance:e.levelOfMaintenance,solutionUsed:e.solutionUsed,companyERP:e.companyERP,energyManagementChallenge:e.energyManagementChallenge},r=await (0,j.F)({formVariant:"secondStepForm",data:t,url:h,locale:b});if(!r){s.toast.error(g.formFields.toastErrorMessage.genericError),P(!1);return}M(),q({...F,...t});let l=E.X[t.companyERP],o=await (0,T.P)({email:t.email,companyERP:null!=l?l:t.companyERP,jobCategory:t.jobCategory,operationSchedule:"2 shifts",maintenanceMaturity:"corrective",maintenanceTeamSize:"51-100",electricityConsumption:150,name:"".concat(null==F?void 0:F.firstName," ").concat(null==F?void 0:F.lastName),industrySector:null==F?void 0:F.industrySector,jobTitle:null==F?void 0:F.jobTitle,locale:b});y.demoForms.submitDemoFormsSecondStep({userData:{email:F.email,fullname:F.firstName+" "+F.lastName,phone:F.phone,leadscore:o,product:null==F?void 0:F.product},disableCroctEvent:!0,dimensions:{formType:"modal",pageType:"institutional_page",position:"page"},locale:b}),x("THANKS"),P(!1)};return(0,l.jsx)("div",{className:"relative w-full",children:(0,l.jsxs)("div",{className:"relative z-10 px-6 py-8 md:px-16 lg:py-12",children:[(0,l.jsxs)("article",{className:"mb-8 flex flex-col gap-y-4 text-center",children:[(0,l.jsx)("h2",{className:"font-semibold text-title-xs lg:text-title-md",children:F.firstName+g.title}),(0,l.jsx)("h3",{className:"text-slate-500 text-body-md",children:g.subTitle})]}),(0,l.jsxs)("form",{className:"animate__animated animate__fadeIn mx-auto flex max-w-xl flex-col gap-y-3",id:"complementFormModal",onSubmit:Z(U),children:[(0,l.jsx)(N.m,{errorMessage:null===(t=L.currentGoal)||void 0===t?void 0:t.message.toString(),id:"currentGoal",name:"currentGoal",options:g.formFields.currentGoal.options,placeholder:g.formFields.currentGoal.label,..._("currentGoal")}),(0,l.jsx)(N.m,{errorMessage:null===(r=L.companyERP)||void 0===r?void 0:r.message.toString(),id:"companyERP",name:"companyERP",options:g.formFields.companyERP.options,placeholder:g.formFields.companyERP.label,..._("companyERP")}),"smart"===F.product&&(0,l.jsx)(N.m,{errorMessage:null===(d=L.solutionUsed)||void 0===d?void 0:d.message.toString(),id:"solutionUsed",name:"solutionUsed",options:g.formFields.solutionUsed.options,placeholder:g.formFields.solutionUsed.label,..._("solutionUsed")}),"blinkforge"===F.product&&(0,l.jsx)(N.m,{className:"",errorMessage:null===(u=L.levelOfAutomation)||void 0===u?void 0:u.message.toString(),id:"levelOfAutomation",name:"levelOfAutomation",options:g.formFields.levelOfAutomation.options,placeholder:g.formFields.levelOfAutomation.label,..._("levelOfAutomation")}),"tracos"===F.product&&(0,l.jsx)(N.m,{errorMessage:null===(c=L.levelOfMaintenance)||void 0===c?void 0:c.message.toString(),id:"levelOfMaintenance",name:"levelOfMaintenance",options:g.formFields.levelOfMaintenance.options,placeholder:g.formFields.levelOfMaintenance.label,..._("levelOfMaintenance")}),"energy"===F.product&&(0,l.jsx)(N.m,{errorMessage:null===(p=L.energyManagementChallenge)||void 0===p?void 0:p.message.toString(),id:"energyManagementChallenge",name:"energyManagementChallenge",options:g.formFields.energyManagementChallenge.options,placeholder:g.formFields.energyManagementChallenge.label,..._("energyManagementChallenge")}),(0,l.jsx)(m.z,{buttonSize:"large",className:"min-w-full",isLoading:O,type:"submit",children:g.button.label})]})]})})},_=e=>{let{locale:t,messageErrors:r}=e;return O.Z.object().shape({name:O.Z.string().required(r.requiredField).nameValidation(t),email:O.Z.string().trim().required(r.requiredField).corporateEmailValidation(t),phone:O.Z.string().required(r.requiredField).verifyPhoneMinLength(t),jobTitle:O.Z.string().notRequired().required(r.requiredSelectField),industrySector:O.Z.string().trim().notRequired().required(r.requiredSelectField)})},Z=e=>{let{locale:t,product:r}=e,l=q.i[t];switch(r){case"blinkforge":case"energy":case"smart":case"tracos":return _({locale:t,messageErrors:l});default:return _({locale:t,messageErrors:l}).shape({product:O.Z.string().trim().required(l.requiredSelectField)})}};var L=r(75900);let U=e=>{let{copy:t,setIsOpen:r}=e,{userData:o}=(0,f.useConversionFormContext)();return(0,l.jsxs)("div",{className:"animate__animated animate__fadeIn flex w-full flex-col items-center justify-center gap-y-2 overflow-hidden px-4 py-12 text-center md:px-16",children:[(0,l.jsxs)("h2",{className:"flex flex-col items-center justify-center gap-4 font-semibold text-title-xs lg:text-title-md",children:[(0,l.jsx)(L.n,{className:"size-8 text-blue-600"}),(0,l.jsx)("span",{className:"text-slate-700",children:t.title})]}),(0,l.jsx)("h3",{className:"mx-auto mb-2 px-4 text-slate-500 text-body-md lg:max-w-lg",children:o.firstName+t.subTitle}),(0,l.jsx)(m.z,{onClick:()=>r(!1),variant:"secondary",children:t.button.label})]})},A=e=>{var t,r,N,E,T,C;let{id:q,variant:O="primary",copy:P,forceProduct:w}=e,_=(0,a.usePathname)(),L=(0,o.useLocale)(),{dispatch:A}=(0,v.I)(),{product:I}=(0,g.useProductPageContext)(),{setUserData:G}=(0,f.useConversionFormContext)(),[k,z]=(0,i.useState)("COMPLEMENT"),V=w||I,[X,D]=(0,i.useState)(!1),H=(0,n.cI)({resolver:(0,S.X)(Z({locale:L,product:V}))}),{register:K,handleSubmit:J,reset:B,formState:{errors:Q,isSubmitting:W}}=H,{isBot:Y,turnstileComponent:$,isAllowed:ee}=(0,h.P)({methods:H}),et=async e=>{if("en"===L&&!x.L){let t=await (0,b.l)(L,e.token);if(!t){s.toast.error(P.formFields.toastErrorMessage.botError);return}Y&&s.toast.error(P.formFields.toastErrorMessage.botError)}let t=(0,y.v)(P.formFields.jobTitle.options),r=(0,y.v)(P.formFields.industrySector.options),l="all"!==V?V:e.product,o=(0,M.J)(e.name),a={firstname:o.firstName,lastname:o.lastName,email:e.email,phone:e.phone,jobTitle:e.jobTitle,jobTitleInternalValue:t[e.jobTitle],page:_,industrySector:e.industrySector,industrySectorInternalValue:r[e.industrySector],...(0,F.e)(l),isRequestVisit:!1};G({...e,product:l,firstName:o.firstName,lastName:o.lastName,page:_});let i=await (0,j.F)({formVariant:"institutionalForm",data:a,url:_,locale:L});if(!i){s.toast.error(P.formFields.toastErrorMessage.genericError);return}A.demoForms.submitDemoFormsFirstStep({userData:{email:a.email,fullname:e.name,industrySector:a.industrySector,jobTitle:a.jobTitle,phone:a.phone},dimensions:{formType:"fixed_section",pageType:"institutional_page",position:"page"}}),B(),z("COMPLEMENT"),D(!0)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{className:"flex flex-col gap-y-3",id:q,onSubmit:J(et),children:[(0,l.jsx)(u.U,{errorMessage:null===(t=Q.name)||void 0===t?void 0:t.message,id:"name-institutional-form",name:"name",placeholder:P.formFields.name.label,variant:O,...K("name")}),(0,l.jsx)(u.U,{errorMessage:null===(r=Q.email)||void 0===r?void 0:r.message,id:"email-institutional-form",name:"email",placeholder:P.formFields.corporativeEmail.label,variant:O,...K("email")}),(0,l.jsxs)("section",{className:"flex w-full flex-col gap-3 sm:flex-row",children:[(0,l.jsx)(c.g,{formMethods:H,id:"phone-institutional-form",name:"phone",variant:O}),(0,l.jsx)(d.X,{errorMessage:null===(N=Q.jobTitle)||void 0===N?void 0:N.message,formMethods:H,id:"jobTitle-institutional-form",name:"jobTitle",options:P.formFields.jobTitle.options,placeholder:P.formFields.jobTitle.label})]}),(0,l.jsx)(d.X,{errorMessage:null===(E=Q.industrySector)||void 0===E?void 0:E.message,formMethods:H,id:"industrySector-institutional-form",name:"industrySector",options:P.formFields.industrySector.options,placeholder:P.formFields.industrySector.label}),"all"===V&&(0,l.jsx)(d.X,{defaultValue:null===(T=P.formFields.product.options.find(e=>e.value===V))||void 0===T?void 0:T.value,errorMessage:null===(C=Q.product)||void 0===C?void 0:C.message,formMethods:H,id:"product-institutional-form",name:"product",options:P.formFields.product.options,placeholder:P.formFields.product.label}),(0,l.jsx)(m.z,{disabled:!x.L&&"en"===L&&(!ee||Y),buttonSize:"large",className:"min-w-full",isLoading:W,type:"submit",children:P.formFields.button.label}),"en"!==L||x.L?null:$]},k),(0,l.jsx)(p.u,{isOpen:X,setIsOpen:D,children:(0,l.jsx)("div",{className:"flex max-w-3xl flex-col rounded-sm bg-white text-left",children:(()=>{switch(k){case"COMPLEMENT":return(0,l.jsx)(R,{copy:{formFields:P.formFields,...P.complementForm},formStage:k,setFormStage:z});case"THANKS":return(0,l.jsx)(U,{copy:{...P.submittedSection},setIsOpen:D})}})()})})]})}}}]);